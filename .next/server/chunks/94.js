"use strict";exports.id=94,exports.ids=[94],exports.modules={2741:(e,s,a)=>{a.d(s,{Bc:()=>i,ZI:()=>c,k$:()=>d,m_:()=>o});var t=a(26611),r=a(35334),l=a(37502),n=a(94105);let i=l.Kq,o=l.bL,d=l.l9,c=r.forwardRef(({className:e,sideOffset:s=4,...a},r)=>(0,t.jsx)(l.UC,{ref:r,sideOffset:s,className:(0,n.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}));c.displayName=l.UC.displayName},5423:(e,s,a)=>{a.d(s,{p:()=>C});var t=a(26611),r=a(35334),l=a(1282),n=a.n(l),i=a(54393),o=a(46318),d=a(50749),c=a(22161),m=a(79809),x=a(67321),h=a(94105);let p=d.bL,f=d.l9;d.YJ,d.ZL,d.Pb,d.z6,r.forwardRef(({className:e,inset:s,children:a,...r},l)=>(0,t.jsxs)(d.ZP,{ref:l,className:(0,h.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",e),...r,children:[a,(0,t.jsx)(c.A,{className:"ml-auto h-4 w-4"})]})).displayName=d.ZP.displayName,r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(d.G5,{ref:a,className:(0,h.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})).displayName=d.G5.displayName;let u=r.forwardRef(({className:e,sideOffset:s=4,...a},r)=>(0,t.jsx)(d.ZL,{children:(0,t.jsx)(d.UC,{ref:r,sideOffset:s,className:(0,h.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));u.displayName=d.UC.displayName;let g=r.forwardRef(({className:e,inset:s,...a},r)=>(0,t.jsx)(d.q7,{ref:r,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",e),...a}));g.displayName=d.q7.displayName,r.forwardRef(({className:e,children:s,checked:a,...r},l)=>(0,t.jsxs)(d.H_,{ref:l,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...r,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(d.VF,{children:(0,t.jsx)(m.A,{className:"h-4 w-4"})})}),s]})).displayName=d.H_.displayName,r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(d.hN,{ref:r,className:(0,h.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(d.VF,{children:(0,t.jsx)(x.A,{className:"h-2 w-2 fill-current"})})}),s]})).displayName=d.hN.displayName;let j=r.forwardRef(({className:e,inset:s,...a},r)=>(0,t.jsx)(d.JU,{ref:r,className:(0,h.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...a}));j.displayName=d.JU.displayName;let N=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(d.wv,{ref:a,className:(0,h.cn)("-mx-1 my-1 h-px bg-muted",e),...s}));N.displayName=d.wv.displayName;var b=a(88069),v=a(83464),y=a(33842),w=a(10563),_=a(37269),k=a(49357),F=a(36776),E=a(2741);function A({viewMode:e,onChange:s,showLabels:a=!1}){return(0,t.jsxs)("div",{className:`flex items-center ${a?"w-full justify-between":""} rounded-full bg-[#F5F5F5] p-1`,children:[(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>s("list"),className:`${"list"===e?"bg-white text-[#222222] shadow-sm":"bg-transparent text-[#888888] hover:bg-gray-200 hover:text-[#222222]"} rounded-full px-3 py-1 h-8 ${a?"flex-1 justify-center":""}`,children:a?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(k.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm",children:"Lista"})]}):(0,t.jsx)(E.Bc,{children:(0,t.jsxs)(E.m_,{children:[(0,t.jsx)(E.k$,{asChild:!0,children:(0,t.jsx)(k.A,{className:"h-4 w-4"})}),(0,t.jsx)(E.ZI,{children:(0,t.jsx)("p",{children:"Vista de lista"})})]})})}),(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>s("gallery"),className:`${"gallery"===e?"bg-white text-[#222222] shadow-sm":"bg-transparent text-[#888888] hover:bg-gray-200 hover:text-[#222222]"} rounded-full px-3 py-1 h-8 ${a?"flex-1 justify-center":""}`,children:a?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm",children:"Galer\xeda"})]}):(0,t.jsx)(E.Bc,{children:(0,t.jsxs)(E.m_,{children:[(0,t.jsx)(E.k$,{asChild:!0,children:(0,t.jsx)(F.A,{className:"h-4 w-4"})}),(0,t.jsx)(E.ZI,{children:(0,t.jsx)("p",{children:"Vista de galer\xeda"})})]})})})]})}function C({viewMode:e,onViewModeChange:s}){let a=(0,i.useRouter)(),[l,d]=(0,r.useState)(!1);return(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(p,{children:[(0,t.jsx)(f,{asChild:!0,children:(0,t.jsx)(o.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,t.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD80"})})}),(0,t.jsxs)(u,{className:"w-56",align:"end",forceMount:!0,children:[(0,t.jsx)(j,{className:"font-normal",children:(0,t.jsx)("div",{className:"flex flex-col space-y-1",children:(0,t.jsx)("p",{className:"text-sm font-medium leading-none",children:"Mi Perfil"})})}),(0,t.jsx)(N,{}),e&&s&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-2 py-1.5",children:(0,t.jsx)(A,{viewMode:e,onChange:s,showLabels:!0})}),(0,t.jsx)(N,{})]}),(0,t.jsx)(n(),{href:"/favorites",children:(0,t.jsxs)(g,{className:"cursor-pointer",children:[(0,t.jsx)(b.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Favoritos"})]})}),(0,t.jsx)(n(),{href:"/admin",children:(0,t.jsxs)(g,{className:"cursor-pointer",children:[(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Administraci\xf3n"})]})}),(0,t.jsxs)(g,{className:"cursor-pointer text-red-500 focus:text-red-500",disabled:l,onClick:()=>{d(!0);try{(0,w.ri)(),a.push("/")}catch(e){console.error("Error al cerrar sesi\xf3n:",e),(0,_.o)({title:"Error",description:"Hubo un problema al cerrar sesi\xf3n. Por favor, intenta de nuevo.",variant:"destructive"})}finally{d(!1)}},children:[(0,t.jsx)(y.A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:l?"Cerrando sesi\xf3n...":"Cerrar sesi\xf3n"})]})]})]})})}},10563:(e,s,a)=>{a.d(s,{F6:()=>i,iD:()=>l,ri:()=>n,wR:()=>r});let t=a(35172).X9;function r(){return!1}function l(e){if("dayko"===e)try{return localStorage.setItem(t,"authenticated"),!0}catch(e){console.error("Error al guardar estado de autenticaci\xf3n:",e)}return!1}function n(){try{localStorage.removeItem(t),document.cookie="auth-status=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"}catch(e){console.error("Error al cerrar sesi\xf3n:",e)}}function i(){return"aebaf7a8-0d83-403c-b5f4-9d798b74e3ee"}},19748:(e,s,a)=>{a.d(s,{UU:()=>n});var t=a(30417);let r=null;function l(){return process.env.NEXT_PUBLIC_SUPABASE_URL&&process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY?r||(r=(0,t.createClientComponentClient)({supabaseUrl:process.env.NEXT_PUBLIC_SUPABASE_URL,supabaseKey:process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,options:{auth:{persistSession:!0,storageKey:"giuli-reading-app-auth",autoRefreshToken:!0,detectSessionInUrl:!0}}})):null}let n=()=>l();l()},35172:(e,s,a)=>{a.d(s,{HQ:()=>t,X9:()=>r}),process.env.NEXT_PUBLIC_SITE_URL;let t="mis-lecturas-books",r="mis-lecturas-auth"},50202:(e,s,a)=>{a.d(s,{Cf:()=>h,Es:()=>f,HM:()=>m,L3:()=>u,c7:()=>p,lG:()=>o,rr:()=>g,zM:()=>d});var t=a(26611),r=a(35334),l=a(92993),n=a(4221),i=a(94105);let o=l.bL,d=l.l9,c=l.ZL,m=l.bm,x=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.hJ,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));x.displayName=l.hJ.displayName;let h=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(c,{children:[(0,t.jsx)(x,{}),(0,t.jsxs)(l.UC,{ref:r,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[s,(0,t.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));h.displayName=l.UC.displayName;let p=({className:e,...s})=>(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});p.displayName="DialogHeader";let f=({className:e,...s})=>(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});f.displayName="DialogFooter";let u=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.hE,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));u.displayName=l.hE.displayName;let g=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(l.VY,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));g.displayName=l.VY.displayName},59507:(e,s,a)=>{a.d(s,{M:()=>u});var t=a(26611),r=a(1282),l=a.n(r),n=a(46318),i=a(37148),o=a(61702),d=a(35334),c=a(50202),m=a(88069),x=a(72075),h=a(65309);function p({book:e,type:s,children:a}){let[r,p]=(0,d.useState)(!1),[f,u]=(0,d.useState)(!1);return(0,t.jsxs)(c.lG,{open:r,onOpenChange:p,children:[(0,t.jsx)(c.zM,{asChild:!0,children:a}),(0,t.jsxs)(c.Cf,{className:"sm:max-w-md rounded-xl max-h-[90vh] overflow-y-auto shadow-[0_1px_2px_rgba(0,0,0,0.07),0_4px_8px_rgba(0,0,0,0.05),0_12px_24px_rgba(0,0,0,0.03)]",children:[(0,t.jsxs)(c.c7,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(c.L3,{className:"font-serif text-2xl text-[#222222]",children:e.title}),e.pending_sync&&(0,t.jsxs)("div",{className:"flex items-center text-amber-500 text-xs",children:[(0,t.jsx)(i.A,{className:"h-3 w-3 mr-1"}),(0,t.jsx)("span",{children:"Pendiente de sincronizar"})]})]}),(0,t.jsx)(c.rr,{className:"text-[#888888]",children:e.author})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[e.thumbnail?(0,t.jsx)("div",{className:"flex justify-center mb-4",children:(0,t.jsx)("div",{className:"h-52 w-32 rounded-md shadow-[0_2px_8px_rgba(0,0,0,0.08)] overflow-hidden bg-gray-100",children:(0,t.jsx)("img",{src:e.thumbnail||"/placeholder.svg",alt:e.title,className:"h-full w-full object-contain",onError:e=>{e.currentTarget.src="/abstract-book-cover.png",e.currentTarget.className="h-full w-full object-contain bg-gray-100"}})})}):(0,t.jsx)("div",{className:"flex justify-center mb-4",children:(0,t.jsx)("div",{className:"h-52 w-32 rounded-md shadow-[0_2px_8px_rgba(0,0,0,0.08)] bg-gray-100 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-4xl",children:"\uD83D\uDCDA"})})}),"read"===s&&(0,t.jsxs)(t.Fragment,{children:[e.rating&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-sm text-[#888888] w-24",children:"Valoraci\xf3n:"}),(0,t.jsx)("div",{className:"flex",children:Array.from({length:5}).map((s,a)=>(0,t.jsx)("span",{className:"text-sm",children:a<(e.rating||0)?"⭐":"☆"},a))}),5===e.rating&&(0,t.jsx)(m.A,{className:"h-4 w-4 ml-2 fill-[#FFA69E] text-[#FFA69E]"})]}),e.date_finished&&(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-sm text-[#888888] w-24",children:"Terminado el:"}),(0,t.jsx)("span",{className:"text-sm text-[#222222]",children:(e=>{if(!e)return"Sin fecha";let s=new Date(e);return new Intl.DateTimeFormat("es-ES",{year:"numeric",month:"long",day:"numeric"}).format(s)})(e.date_finished)})]}),e.review&&(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm text-[#888888] mb-2",children:"Tus pensamientos:"}),(0,t.jsx)("div",{className:"bg-[#F5F5F5] p-3 rounded-lg text-sm text-[#222222] shadow-[inset_0_1px_2px_rgba(0,0,0,0.03)]",children:e.review})]})]}),"wishlist"===s&&(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("span",{className:"text-sm text-[#888888]",children:"✨ En tu wishlist"})}),(e.published_date||e.publisher||e.page_count)&&(0,t.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-[#222222] mb-2",children:"Informaci\xf3n de publicaci\xf3n"}),(0,t.jsxs)("div",{className:"space-y-2",children:[e.published_date&&(0,t.jsxs)("div",{className:"flex items-center text-sm",children:[(0,t.jsx)(x.A,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,t.jsxs)("span",{children:["Publicado: ",e.published_date]})]}),e.publisher&&(0,t.jsxs)("div",{className:"flex items-center text-sm",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,t.jsxs)("span",{children:["Editorial: ",e.publisher]})]}),e.page_count&&e.page_count>0&&(0,t.jsxs)("div",{className:"flex items-center text-sm",children:[(0,t.jsx)("span",{className:"mr-2 text-gray-400 text-xs",children:"\uD83D\uDCC4"}),(0,t.jsxs)("span",{children:[e.page_count," p\xe1ginas"]})]}),e.isbn&&(0,t.jsxs)("div",{className:"flex items-center text-sm",children:[(0,t.jsx)("span",{className:"mr-2 text-gray-400 text-xs",children:"\uD83D\uDCDA"}),(0,t.jsxs)("span",{children:["ISBN: ",e.isbn]})]})]})]}),e.categories&&e.categories.length>0&&(0,t.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-[#222222] mb-2",children:"Categor\xedas"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.categories.map((e,s)=>(0,t.jsx)("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-xs text-gray-600 shadow-[0_1px_2px_rgba(0,0,0,0.03)]",children:e},s))})]}),e.description&&(0,t.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-[#222222] mb-2",children:"Sinopsis"}),(0,t.jsx)("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg shadow-[inset_0_1px_2px_rgba(0,0,0,0.03)]",children:f?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"whitespace-pre-line",children:e.description}),(0,t.jsx)("button",{onClick:()=>u(!1),className:"mt-2 text-xs text-[#FFA69E] hover:underline flex items-center",children:(0,t.jsx)("span",{children:"Mostrar menos"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"line-clamp-4 whitespace-pre-line",children:e.description}),e.description.length>200&&(0,t.jsx)("button",{onClick:()=>u(!0),className:"mt-2 text-xs text-[#FFA69E] hover:underline flex items-center",children:(0,t.jsx)("span",{children:"Leer m\xe1s"})})]})})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)(n.$,{variant:"ghost",className:"rounded-full text-[#888888] hover:bg-[#F5F5F5]",onClick:()=>p(!1),children:"Cerrar"}),(0,t.jsx)(l(),{href:`/edit-book/${e.id||e.local_id}`,children:(0,t.jsxs)(n.$,{className:"rounded-full bg-[#D0E2FF] text-[#222222] hover:bg-[#FFA69E] shadow-[0_2px_4px_rgba(0,0,0,0.05)]",children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Editar"]})})]})]})]})}var f=a(2741);function u({book:e,type:s,showActions:a=!1,viewMode:r="list"}){var d;let c=e.rating?`${e.rating}⭐️`:null,m="shadow-[0_2px_4px_rgba(0,0,0,0.07),0_4px_8px_rgba(0,0,0,0.05),0_8px_16px_rgba(0,0,0,0.03)]",x="hover:shadow-[0_4px_6px_rgba(0,0,0,0.07),0_8px_16px_rgba(0,0,0,0.06),0_16px_32px_rgba(0,0,0,0.04)]",h="rounded-xl";return"gallery"===r?(0,t.jsx)(p,{book:e,type:s,children:(0,t.jsx)("div",{className:`cursor-pointer transition-all duration-300 ${m} ${x} hover:-translate-y-1 ${h} overflow-hidden`,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"relative overflow-hidden bg-gray-100",children:[e.pending_sync&&(0,t.jsx)("div",{className:"absolute bottom-2 right-2 z-10 bg-white rounded-full p-1 shadow-sm text-amber-500",children:(0,t.jsx)(i.A,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"aspect-[1/1.545] w-full",children:(0,t.jsx)("img",{src:((d=e.thumbnail)?d.includes("books.google.com")?d.includes("zoom=")?d.replace(/zoom=\d/,"zoom=2"):d.includes("?")?`${d}&zoom=2`:`${d}?zoom=2`:d:"/abstract-book-cover.png")||"/placeholder.svg",alt:e.title,className:"w-full h-full object-cover object-top",onError:e=>{e.currentTarget.src="/abstract-book-cover.png",e.currentTarget.className="w-full h-full object-contain bg-gray-100"},loading:"lazy"})})]}),(0,t.jsxs)("div",{className:`p-3 pb-4 ${"read"===s?"bg-white":"bg-[#F5F5F5]"} h-[5.5rem] border-t border-gray-50`,children:[(0,t.jsx)(f.Bc,{children:(0,t.jsxs)(f.m_,{children:[(0,t.jsx)(f.k$,{asChild:!0,children:(0,t.jsx)("h3",{className:"font-serif text-sm font-medium text-[#222222] line-clamp-2 break-words hyphens-auto",children:e.title})}),(0,t.jsx)(f.ZI,{children:(0,t.jsx)("p",{children:e.title})})]})}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,t.jsx)("p",{className:"text-xs text-[#888888] line-clamp-1",children:e.author}),c?(0,t.jsx)("span",{className:"text-xs",children:c}):"wishlist"===s&&(0,t.jsx)("span",{className:"text-xs",children:"✨"})]})]})]})})}):(0,t.jsx)(p,{book:e,type:s,children:(0,t.jsxs)("div",{className:`${h} ${"read"===s?"bg-white":"bg-[#F5F5F5]"} p-4 cursor-pointer 
        ${m} ${x} hover:-translate-y-1 transition-all duration-300 overflow-hidden`,children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[e.thumbnail?(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("img",{src:e.thumbnail||"/placeholder.svg",alt:e.title,className:"h-20 w-14 object-cover object-top rounded-md shadow-[0_2px_4px_rgba(0,0,0,0.1)]",onError:e=>{e.currentTarget.src="/abstract-book-cover.png",e.currentTarget.className="h-20 w-14 rounded-md shadow-sm object-contain bg-gray-100"},loading:"lazy"})}):null,(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 pr-2",children:[(0,t.jsx)("h3",{className:"font-serif text-lg font-medium text-[#222222] line-clamp-2",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-[#888888] line-clamp-1",children:e.author}),"read"===s&&e.rating&&(0,t.jsx)("div",{className:"mt-2 flex",children:Array.from({length:5}).map((s,a)=>(0,t.jsx)("span",{className:"text-sm",children:a<e.rating?"⭐":"☆"},a))}),"wishlist"===s&&(0,t.jsxs)("div",{className:"mt-2 flex items-center text-sm text-[#888888]",children:[(0,t.jsx)("span",{className:"mr-1",children:"✨"})," En tu wishlist"]})]}),(0,t.jsx)("div",{className:"flex flex-col items-end",children:e.pending_sync&&(0,t.jsx)("div",{className:"text-amber-500 mt-1",children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})})]})})]}),a&&(0,t.jsx)("div",{className:"mt-3 flex justify-end",children:(0,t.jsx)(l(),{href:`/edit-book/${e.id||e.local_id}`,onClick:e=>e.stopPropagation(),children:(0,t.jsxs)(n.$,{variant:"ghost",size:"sm",className:"h-8 rounded-full text-[#888888] hover:bg-[#F5F5F5] hover:text-[#222222]",children:[(0,t.jsx)(o.A,{className:"mr-1 h-3 w-3"}),"Editar"]})})})]})})}},86455:(e,s,a)=>{function t(){return console.log("getLocalBooks: Ejecutando en servidor, retornando array vac\xedo"),[]}async function r(){return console.log("initializeLocalStorage: Ejecutando en servidor, no se puede inicializar"),{success:!1,count:0}}a.d(s,{HQ:()=>r,M7:()=>t}),a(19748),a(10563),a(35172)},92038:(e,s,a)=>{a.d(s,{DY:()=>i,ST:()=>n});var t=a(19748),r=a(10563),l=a(86455);async function n(e){try{let s=(0,t.UU)(),a=(0,r.F6)(),{data:n,error:i}=await s.from("books").select("*").eq("user_id",a).eq("type",e).order("created_at",{ascending:!1});if(i){console.error(`Error fetching ${e} books from Supabase:`,i);let s=(0,l.M7)();if(s.length>0)return console.log(`Falling back to local storage for ${e} books`),s.filter(s=>s.type===e);return[]}if(n&&n.length>0)return console.log(`Retrieved ${n.length} ${e} books from Supabase`),n;let o=(0,l.M7)();if(o.length>0)return console.log(`No Supabase data, using local storage for ${e} books`),o.filter(s=>s.type===e);return[]}catch(a){console.error("Error in getBooksByType:",a);let s=(0,l.M7)();if(s.length>0)return s.filter(s=>s.type===e);return[]}}async function i(){try{let e=(0,t.UU)(),s=(0,r.F6)(),{data:a,error:n}=await e.from("books").select("*").eq("user_id",s).eq("type","read").eq("rating",5).order("created_at",{ascending:!1});if(n){console.error("Error fetching favorite books from Supabase:",n);let e=(0,l.M7)();if(e.length>0)return console.log("Falling back to local storage for favorite books"),e.filter(e=>"read"===e.type&&5===e.rating);return[]}if(a&&a.length>0)return console.log(`Retrieved ${a.length} favorite books from Supabase`),a;let i=(0,l.M7)();if(i.length>0)return console.log("No Supabase data, using local storage for favorite books"),i.filter(e=>"read"===e.type&&5===e.rating);return[]}catch(s){console.error("Error in getFavoriteBooks:",s);let e=(0,l.M7)();if(e.length>0)return e.filter(e=>"read"===e.type&&5===e.rating);return[]}}}};