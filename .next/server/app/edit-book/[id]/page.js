(()=>{var exports={};exports.id=423,exports.ids=[423],exports.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11389:(e,t,r)=>{"use strict";r.d(t,{z:()=>a});var s=r(60647);let a=(0,s.createServerReference)("603ae5f4509c98b91b93ad3d01fd4b6b396988d947",s.callServer,void 0,s.findSourceMapURL,"updateBookAction")},11997:e=>{"use strict";e.exports=require("punycode")},14444:(e,t,r)=>{"use strict";r.d(t,{Lt:()=>H,Rx:()=>Q,Zr:()=>ee,EO:()=>G,$v:()=>W,ck:()=>Y,wd:()=>K,r7:()=>Z,tv:()=>J});var s=r(26611),a=r(35334),i=r(68523),o=r(29871),l=r(92993),n=r(83863),d=r(83217),c="AlertDialog",[u,p]=(0,i.A)(c,[l.Hs]),m=(0,l.Hs)(),f=e=>{let{__scopeAlertDialog:t,...r}=e,a=m(t);return(0,s.jsx)(l.bL,{...a,...r,modal:!0})};f.displayName=c;var h="AlertDialogTrigger",x=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=m(r);return(0,s.jsx)(l.l9,{...i,...a,ref:t})});x.displayName=h;var b=e=>{let{__scopeAlertDialog:t,...r}=e,a=m(t);return(0,s.jsx)(l.ZL,{...a,...r})};b.displayName="AlertDialogPortal";var g="AlertDialogOverlay",y=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=m(r);return(0,s.jsx)(l.hJ,{...i,...a,ref:t})});y.displayName=g;var v="AlertDialogContent",[j,N]=u(v),_=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,children:i,...c}=e,u=m(r),p=a.useRef(null),f=(0,o.s)(t,p),h=a.useRef(null);return(0,s.jsx)(l.G$,{contentName:v,titleName:w,docsSlug:"alert-dialog",children:(0,s.jsx)(j,{scope:r,cancelRef:h,children:(0,s.jsxs)(l.UC,{role:"alertdialog",...u,...c,ref:f,onOpenAutoFocus:(0,n.m)(c.onOpenAutoFocus,e=>{e.preventDefault(),h.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,s.jsx)(d.xV,{children:i}),(0,s.jsx)(P,{contentRef:p})]})})})});_.displayName=v;var w="AlertDialogTitle",E=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=m(r);return(0,s.jsx)(l.hE,{...i,...a,ref:t})});E.displayName=w;var R="AlertDialogDescription",C=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=m(r);return(0,s.jsx)(l.VY,{...i,...a,ref:t})});C.displayName=R;var F="AlertDialogAction",k=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,i=m(r);return(0,s.jsx)(l.bm,{...i,...a,ref:t})});k.displayName=F;var A="AlertDialogCancel",O=a.forwardRef((e,t)=>{let{__scopeAlertDialog:r,...a}=e,{cancelRef:i}=N(A,r),n=m(r),d=(0,o.s)(t,i);return(0,s.jsx)(l.bm,{...n,...a,ref:d})});O.displayName=A;var P=({contentRef:e})=>{let t=`\`${v}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${v}\` by passing a \`${R}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${v}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},S=f,D=x,T=b,L=y,M=_,z=k,B=O,I=E,q=C,U=r(94105),$=r(46318);let H=S,J=D,X=T,V=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(L,{className:(0,U.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));V.displayName=L.displayName;let G=a.forwardRef(({className:e,...t},r)=>(0,s.jsxs)(X,{children:[(0,s.jsx)(V,{}),(0,s.jsx)(M,{ref:r,className:(0,U.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));G.displayName=M.displayName;let K=({className:e,...t})=>(0,s.jsx)("div",{className:(0,U.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});K.displayName="AlertDialogHeader";let Y=({className:e,...t})=>(0,s.jsx)("div",{className:(0,U.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Y.displayName="AlertDialogFooter";let Z=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(I,{ref:r,className:(0,U.cn)("text-lg font-semibold",e),...t}));Z.displayName=I.displayName;let W=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(q,{ref:r,className:(0,U.cn)("text-sm text-muted-foreground",e),...t}));W.displayName=q.displayName;let Q=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(z,{ref:r,className:(0,U.cn)((0,$.r)(),e),...t}));Q.displayName=z.displayName;let ee=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(B,{ref:r,className:(0,U.cn)((0,$.r)({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));ee.displayName=B.displayName},18468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return c},RedirectType:function(){return a.RedirectType},forbidden:function(){return o.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect},unauthorized:function(){return l.unauthorized},unstable_rethrow:function(){return n.unstable_rethrow}});let s=r(76429),a=r(82550),i=r(72518),o=r(36404),l=r(87063),n=r(19919);class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class c extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19919:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return s}});let s=r(46854).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},26990:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(21294).A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},27714:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{EditBookForm:()=>EditBookForm});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26611),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(35334),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),next_navigation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(54393),next_link__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1282),next_link__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_3__),_components_ui_button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(46318),_components_ui_input__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(99508),_components_ui_textarea__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(53272),_components_ui_label__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(80342),_components_ui_radio_group__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(77203),_components_star_rating__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(48277),_barrel_optimize_names_ArrowLeft_ChevronDown_ChevronUp_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(64228),_barrel_optimize_names_ArrowLeft_ChevronDown_ChevronUp_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(26990),_barrel_optimize_names_ArrowLeft_ChevronDown_ChevronUp_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(98419),_barrel_optimize_names_ArrowLeft_ChevronDown_ChevronUp_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(62728),_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(37269),_app_actions__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(11389),_app_actions__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(86318),_components_ui_alert_dialog__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(14444),_components_book_metadata_search__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(83787);function EditBookForm({book}){let router=(0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter)(),[isSubmitting,setIsSubmitting]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[isDeleting,setIsDeleting]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[bookType,setBookType]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(book.type),[rating,setRating]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(book.rating||0),[deleteError,setDeleteError]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[showFullDescription,setShowFullDescription]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[formData,setFormData]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({title:book.title,author:book.author,date_finished:book.date_finished||"",review:book.review||"",published_date:book.published_date||"",description:book.description||"",categories:book.categories||[],thumbnail:book.thumbnail||"",page_count:book.page_count||0,publisher:book.publisher||"",isbn:book.isbn||""}),handleChange=e=>{let{id:t,value:r}=e.target;setFormData(e=>({...e,[t]:r}))},handleSelectMetadata=e=>{setFormData(t=>({...t,published_date:e.publishedDate||t.published_date,description:e.description||t.description,categories:e.categories||t.categories,thumbnail:e.thumbnail||t.thumbnail,page_count:e.pageCount||t.page_count,publisher:e.publisher||t.publisher,isbn:e.isbn||t.isbn})),(0,_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_10__.o)({title:"Metadatos actualizados",description:"La informaci\xf3n del libro ha sido actualizada con \xe9xito."})},truncateText=(e,t=200)=>!e||e.length<=t?e:e.substring(0,t)+"...",handleSubmit=async e=>{e.preventDefault(),setIsSubmitting(!0);try{let bookData={title:formData.title,author:formData.author,type:bookType,..."read"===bookType&&{rating:rating>0?rating:null,date_finished:formData.date_finished||null,review:formData.review||null},..."wishlist"===bookType&&{rating:null,date_finished:null,review:null},published_date:formData.published_date||null,description:formData.description||null,categories:formData.categories.length>0?formData.categories:null,thumbnail:formData.thumbnail||null,page_count:formData.page_count>0?formData.page_count:null,publisher:formData.publisher||null,isbn:formData.isbn||null};(0,_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_10__.o)({title:"\xa1\xc9xito!",description:"Tu libro ha sido actualizado."});let result=await (0,_app_actions__WEBPACK_IMPORTED_MODULE_13__.z)(book.id,bookData);if(result.success){if(result.clientSideCode)try{eval(result.clientSideCode)}catch(error){console.error("Error executing client code:",error)}router.push("/dashboard"),router.refresh()}else throw Error("Could not update the book")}catch(error){console.error("Error updating book:",error),(0,_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_10__.o)({title:"Error",description:"Hubo un problema al actualizar tu libro. Por favor, int\xe9ntalo de nuevo.",variant:"destructive"})}finally{setIsSubmitting(!1)}},handleDelete=async()=>{setIsDeleting(!0),setDeleteError(null);try{let result=await (0,_app_actions__WEBPACK_IMPORTED_MODULE_14__.$)(book.id);if(result.success){if(result.clientSideCode)try{eval(result.clientSideCode)}catch(error){console.error("Error executing client code:",error)}(0,_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_10__.o)({title:"Libro eliminado",description:"El libro ha sido eliminado de tu colecci\xf3n."}),router.push(`/dashboard?refresh=${Date.now()}`),router.refresh()}else throw Error("Could not delete the book")}catch(error){console.error("Error deleting book:",error);let errorMessage=error instanceof Error?error.message:"Hubo un problema al eliminar tu libro. Por favor, int\xe9ntalo de nuevo.";setDeleteError(errorMessage),(0,_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_10__.o)({title:"Error",description:errorMessage,variant:"destructive"})}finally{setIsDeleting(!1)}};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("header",{className:"mb-8 flex items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_link__WEBPACK_IMPORTED_MODULE_3___default(),{href:"/dashboard",className:"mr-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ArrowLeft_ChevronDown_ChevronUp_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_15__.A,{className:"h-5 w-5 text-[#888888]"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{className:"font-serif text-2xl font-normal text-[#222222]",children:"Editar Libro"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{className:"space-y-8",onSubmit:handleSubmit,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-xl bg-white p-6 shadow-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_radio_group__WEBPACK_IMPORTED_MODULE_8__.z,{defaultValue:book.type,className:"mb-6 flex rounded-full bg-[#F5F5F5] p-1",onValueChange:setBookType,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"w-1/2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_radio_group__WEBPACK_IMPORTED_MODULE_8__.C,{value:"read",id:"read",className:"peer sr-only"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{htmlFor:"read",className:"flex cursor-pointer justify-center rounded-full py-2 text-center text-sm peer-data-[state=checked]:bg-[#D0E2FF] peer-data-[state=checked]:text-[#222222] text-[#888888] transition-all duration-200",children:"Le\xeddo"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"w-1/2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_radio_group__WEBPACK_IMPORTED_MODULE_8__.C,{value:"wishlist",id:"wishlist",className:"peer sr-only"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{htmlFor:"wishlist",className:"flex cursor-pointer justify-center rounded-full py-2 text-center text-sm peer-data-[state=checked]:bg-[#D0E2FF] peer-data-[state=checked]:text-[#222222] text-[#888888] transition-all duration-200",children:"Wishlist"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-6",children:[formData.thumbnail&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex justify-center mb-4 relative",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:formData.thumbnail||"/placeholder.svg",alt:formData.title,className:"h-52 rounded-md shadow-md object-cover",onError:e=>{e.currentTarget.src="/abstract-book-cover.png",e.currentTarget.className="h-52 w-32 rounded-md shadow-md object-cover bg-gray-100"}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute -bottom-3 right-0 left-0 flex justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_book_metadata_search__WEBPACK_IMPORTED_MODULE_12__.D,{bookTitle:formData.title,bookAuthor:formData.author,onSelectMetadata:handleSelectMetadata})})]}),!formData.thumbnail&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex justify-end mb-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_book_metadata_search__WEBPACK_IMPORTED_MODULE_12__.D,{bookTitle:formData.title,bookAuthor:formData.author,onSelectMetadata:handleSelectMetadata})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{htmlFor:"title",className:"text-sm text-[#888888]",children:"T\xedtulo del libro"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_5__.p,{id:"title",value:formData.title,onChange:handleChange,className:"rounded-lg border-[#D0E2FF] bg-white px-4 py-2 text-[#222222] placeholder:text-[#CCCCCC] focus:border-[#FFA69E] focus:ring-[#FFA69E]",required:!0})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{htmlFor:"author",className:"text-sm text-[#888888]",children:"Autor"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_5__.p,{id:"author",value:formData.author,onChange:handleChange,className:"rounded-lg border-[#D0E2FF] bg-white px-4 py-2 text-[#222222] placeholder:text-[#CCCCCC] focus:border-[#FFA69E] focus:ring-[#FFA69E]",required:!0})]}),(formData.published_date||formData.publisher||formData.page_count)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{className:"text-sm text-[#888888]",children:"Informaci\xf3n de publicaci\xf3n"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-lg bg-gray-50 p-3 text-sm",children:[formData.published_date&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-gray-600",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium",children:"Fecha de publicaci\xf3n:"})," ",formData.published_date]}),formData.publisher&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-gray-600",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium",children:"Editorial:"})," ",formData.publisher]}),formData.page_count>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-gray-600",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium",children:"P\xe1ginas:"})," ",formData.page_count]}),formData.isbn&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-gray-600",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium",children:"ISBN:"})," ",formData.isbn]})]})]}),formData.categories&&formData.categories.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{className:"text-sm text-[#888888]",children:"Categor\xedas"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex flex-wrap gap-2",children:formData.categories.map((e,t)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"rounded-full bg-gray-100 px-2 py-1 text-xs text-gray-600",children:e},t))})]}),formData.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{className:"text-sm text-[#888888]",children:"Sinopsis"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-lg bg-gray-50 p-3 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-gray-600",children:showFullDescription?formData.description:truncateText(formData.description)}),formData.description.length>200&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.$,{type:"button",variant:"ghost",size:"sm",className:"mt-2 h-6 text-xs text-blue-500 hover:text-blue-700 flex items-center",onClick:()=>setShowFullDescription(!showFullDescription),children:showFullDescription?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ArrowLeft_ChevronDown_ChevronUp_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_16__.A,{className:"h-3 w-3 mr-1"})," Ver menos"]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ArrowLeft_ChevronDown_ChevronUp_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_17__.A,{className:"h-3 w-3 mr-1"})," Ver m\xe1s"]})})]})]}),"read"===bookType&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{htmlFor:"date_finished",className:"text-sm text-[#888888]",children:"Fecha de finalizaci\xf3n"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_5__.p,{id:"date_finished",type:"date",value:formData.date_finished,onChange:handleChange,className:"rounded-lg border-[#D0E2FF] bg-white px-4 py-2 text-[#222222] focus:border-[#FFA69E] focus:ring-[#FFA69E]"})]}),"read"===bookType&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{className:"text-sm text-[#888888]",children:"Valoraci\xf3n"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_star_rating__WEBPACK_IMPORTED_MODULE_9__.G,{rating:rating,setRating:setRating})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{htmlFor:"review",className:"text-sm text-[#888888]",children:"Tus pensamientos"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_6__.T,{id:"review",value:formData.review,onChange:handleChange,className:"min-h-[100px] rounded-lg border-[#D0E2FF] bg-white px-4 py-2 text-[#222222] placeholder:text-[#CCCCCC] focus:border-[#FFA69E] focus:ring-[#FFA69E]"})]})]})]})]}),deleteError&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"rounded-lg bg-red-500 p-4 text-white",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:deleteError})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.$,{type:"submit",className:"h-12 w-full rounded-full bg-[#D0E2FF] text-[#222222] hover:bg-[#FFA69E] transition-all duration-300",disabled:isSubmitting,children:isSubmitting?"Actualizando...":"Actualizar libro"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_alert_dialog__WEBPACK_IMPORTED_MODULE_11__.Lt,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_alert_dialog__WEBPACK_IMPORTED_MODULE_11__.tv,{asChild:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.$,{type:"button",variant:"outline",className:"h-12 w-full rounded-full border-[#FFA69E] text-[#FFA69E] hover:bg-[#FFF0EE] transition-all duration-300",disabled:isDeleting,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ArrowLeft_ChevronDown_ChevronUp_Trash2_lucide_react__WEBPACK_IMPORTED_MODULE_18__.A,{className:"mr-2 h-4 w-4"}),isDeleting?"Eliminando...":"Eliminar libro"]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_alert_dialog__WEBPACK_IMPORTED_MODULE_11__.EO,{className:"rounded-xl bg-white",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_alert_dialog__WEBPACK_IMPORTED_MODULE_11__.wd,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_alert_dialog__WEBPACK_IMPORTED_MODULE_11__.r7,{className:"font-serif text-xl text-[#222222]",children:"\xbfEst\xe1s seguro?"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_alert_dialog__WEBPACK_IMPORTED_MODULE_11__.$v,{className:"text-[#888888]",children:"Esto eliminar\xe1 permanentemente este libro de tu colecci\xf3n."})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_alert_dialog__WEBPACK_IMPORTED_MODULE_11__.ck,{className:"flex-col space-y-2 sm:space-y-0",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_alert_dialog__WEBPACK_IMPORTED_MODULE_11__.Rx,{className:"h-10 rounded-full bg-[#FFA69E] text-white hover:bg-[#FF8A7E] transition-all duration-300",onClick:handleDelete,children:"S\xed, eliminar libro"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_alert_dialog__WEBPACK_IMPORTED_MODULE_11__.Zr,{className:"h-10 rounded-full border-[#888888] text-[#888888] hover:bg-[#F5F5F5] transition-all duration-300",children:"Cancelar"})]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_link__WEBPACK_IMPORTED_MODULE_3___default(),{href:"/dashboard",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.$,{type:"button",variant:"ghost",className:"h-12 w-full rounded-full text-[#888888] hover:bg-[#F5F5F5] transition-all duration-300",children:"Cancelar"})})]})]})]})}},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35356:(e,t,r)=>{Promise.resolve().then(r.bind(r,27714))},36404:(e,t,r)=>{"use strict";function s(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return s}}),r(2332).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},36951:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(72659),a=r(95420),i=r(76446),o=r.n(i),l=r(70377),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let d={children:["",{children:["edit-book",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,87070)),"/Users/mlucchesi/cursor_personal/app/edit-book/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11046)),"/Users/mlucchesi/cursor_personal/app/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,90462)),"/Users/mlucchesi/cursor_personal/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,13322,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,73003,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,78800,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/mlucchesi/cursor_personal/app/edit-book/[id]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/edit-book/[id]/page",pathname:"/edit-book/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},46854:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let s=r(63480),a=r(79649),i=r(54050),o=r(34742),l=r(82519),n=r(86395);function d(e){if((0,o.isNextRouterError)(e)||(0,i.isBailoutToCSRError)(e)||(0,n.isDynamicServerError)(e)||(0,l.isDynamicPostpone)(e)||(0,a.isPostpone)(e)||(0,s.isHangingPromiseRejectionError)(e))throw e;e instanceof Error&&"cause"in e&&d(e.cause)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},48277:(e,t,r)=>{"use strict";r.d(t,{G:()=>i});var s=r(26611),a=r(46953);function i({rating:e,setRating:t}){return(0,s.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(r=>(0,s.jsx)("button",{type:"button",onClick:()=>t(r),className:"p-1 focus:outline-none",children:(0,s.jsx)(a.A,{className:`h-6 w-6 ${r<=e?"fill-[#FFA69E] text-[#FFA69E]":"text-[#CCCCCC]"} transition-colors duration-200`})},r))})}},50202:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>m,Es:()=>h,HM:()=>u,L3:()=>x,c7:()=>f,lG:()=>n,rr:()=>b,zM:()=>d});var s=r(26611),a=r(35334),i=r(92993),o=r(4221),l=r(94105);let n=i.bL,d=i.l9,c=i.ZL,u=i.bm,p=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.hJ,{ref:r,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));p.displayName=i.hJ.displayName;let m=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(c,{children:[(0,s.jsx)(p,{}),(0,s.jsxs)(i.UC,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,s.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=i.UC.displayName;let f=({className:e,...t})=>(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});f.displayName="DialogHeader";let h=({className:e,...t})=>(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});h.displayName="DialogFooter";let x=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.hE,{ref:r,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));x.displayName=i.hE.displayName;let b=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.VY,{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));b.displayName=i.VY.displayName},50334:(e,t,r)=>{"use strict";async function s(e){try{let t=encodeURIComponent(e),r=await fetch(`https://www.googleapis.com/books/v1/volumes?q=${t}&maxResults=5`);if(!r.ok)throw Error(`Error en la b\xfasqueda: ${r.statusText}`);return(await r.json()).items||[]}catch(e){return console.error("Error al buscar libros:",e),[]}}function a(e){return e?e.includes("books.google.com")?e.includes("zoom=")?e.replace(/zoom=\d/,"zoom=2"):e.includes("?")?`${e}&zoom=2`:`${e}?zoom=2`:e:""}function i(e){let{volumeInfo:t}=e,r="";return t.imageLinks&&(r=a(r=t.imageLinks.large||t.imageLinks.medium||t.imageLinks.small||t.imageLinks.thumbnail||t.imageLinks.smallThumbnail||""),t.title.includes("olvido")&&e.id&&(r=`https://books.google.com/books/content?id=${e.id}&printsec=frontcover&img=1&zoom=3&source=gbs_api`)),{title:t.title||"",author:t.authors?t.authors.join(", "):"",publishedDate:t.publishedDate||"",description:t.description||"",categories:t.categories||[],thumbnail:r,pageCount:t.pageCount||0,publisher:t.publisher||"",isbn:t.industryIdentifiers?.find(e=>"ISBN_13"===e.type)?.identifier||t.industryIdentifiers?.find(e=>"ISBN_10"===e.type)?.identifier||""}}r.d(t,{Ve:()=>s,Xw:()=>i})},52285:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(21294).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},53272:(e,t,r)=>{"use strict";r.d(t,{T:()=>o});var s=r(26611),a=r(35334),i=r(94105);let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));o.displayName="Textarea"},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},62728:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(21294).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71992:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(21294).A)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]])},72518:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return a}});let s=""+r(2332).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function a(){let e=Object.defineProperty(Error(s),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=s,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},74075:e=>{"use strict";e.exports=require("zlib")},74361:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(21294).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},75823:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var s=r(26611),a=r(94105);function i({className:e,...t}){return(0,s.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...t})}},76429:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return o},getRedirectStatusCodeFromError:function(){return u},getRedirectTypeFromError:function(){return c},getURLFromRedirectError:function(){return d},permanentRedirect:function(){return n},redirect:function(){return l}});let s=r(31104),a=r(82550),i=r(19121).actionAsyncStorage;function o(e,t,r){void 0===r&&(r=s.RedirectStatusCode.TemporaryRedirect);let i=Object.defineProperty(Error(a.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return i.digest=a.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",i}function l(e,t){var r;throw null!=t||(t=(null==i?void 0:null==(r=i.getStore())?void 0:r.isAction)?a.RedirectType.push:a.RedirectType.replace),o(e,t,s.RedirectStatusCode.TemporaryRedirect)}function n(e,t){throw void 0===t&&(t=a.RedirectType.replace),o(e,t,s.RedirectStatusCode.PermanentRedirect)}function d(e){return(0,a.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function c(e){if(!(0,a.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function u(e){if(!(0,a.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},77203:(e,t,r)=>{"use strict";r.d(t,{C:()=>d,z:()=>n});var s=r(26611),a=r(35334),i=r(10539),o=r(67321),l=r(94105);let n=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.bL,{className:(0,l.cn)("grid gap-2",e),...t,ref:r}));n.displayName=i.bL.displayName;let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.q7,{ref:r,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,s.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(o.A,{className:"h-2.5 w-2.5 fill-current text-current"})})}));d.displayName=i.q7.displayName},77212:(e,t,r)=>{Promise.resolve().then(r.bind(r,96788))},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},80342:(e,t,r)=>{"use strict";r.d(t,{J:()=>d});var s=r(26611),a=r(35334),i=r(15447),o=r(8182),l=r(94105);let n=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.b,{ref:r,className:(0,l.cn)(n(),e),...t}));d.displayName=i.b.displayName},81630:e=>{"use strict";e.exports=require("http")},83787:(e,t,r)=>{"use strict";r.d(t,{D:()=>f});var s=r(26611),a=r(35334),i=r(99508),o=r(46318),l=r(52285),n=r(4221),d=r(74361),c=r(71992),u=r(50334),p=r(75823),m=r(50202);function f({bookTitle:e,bookAuthor:t,onSelectMetadata:r}){let[f,h]=(0,a.useState)(!1),[x,b]=(0,a.useState)(""),[g,y]=(0,a.useState)([]),[v,j]=(0,a.useState)(!1),[N,_]=(0,a.useState)(!1),[w,E]=(0,a.useState)(null),R=r=>{r&&!x&&b(`${e} ${t}`),h(r)},C=async()=>{if(!x.trim()){y([]);return}j(!0),_(!0),E(null);try{let e=await (0,u.Ve)(x);y(e)}catch(e){console.error("Error en la b\xfasqueda:",e)}finally{j(!1)}},F=e=>{E(e)},k=()=>{w&&(r((0,u.Xw)(w)),h(!1))};return(0,s.jsxs)(m.lG,{open:f,onOpenChange:R,children:[(0,s.jsx)(m.zM,{asChild:!0,children:(0,s.jsxs)(o.$,{variant:"outline",size:"sm",className:"flex items-center gap-1 text-xs rounded-full",children:[(0,s.jsx)(l.A,{className:"h-3 w-3"}),"Actualizar metadatos"]})}),(0,s.jsxs)(m.Cf,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(m.c7,{children:[(0,s.jsx)(m.L3,{children:"Buscar metadatos alternativos"}),(0,s.jsx)(m.rr,{children:"Busca y selecciona informaci\xf3n alternativa para este libro desde Google Books."})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(i.p,{value:x,onChange:e=>b(e.target.value),placeholder:"Buscar por t\xedtulo o autor...",className:"pr-8",onKeyDown:e=>"Enter"===e.key&&C()}),x&&(0,s.jsx)("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>b(""),children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(o.$,{onClick:C,variant:"default",size:"icon",disabled:v||!x.trim(),className:"bg-[#D0E2FF] text-[#222222] hover:bg-[#FFA69E]",children:(0,s.jsx)(d.A,{className:"h-5 w-5"})})]}),v?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.E,{className:"h-20 w-full"}),(0,s.jsx)(p.E,{className:"h-20 w-full"})]}):g.length>0?(0,s.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-2 rounded-md border p-1",children:g.map(e=>(0,s.jsxs)("button",{className:`flex w-full items-start gap-3 rounded-md p-3 text-left hover:bg-gray-100 transition-colors ${w?.id===e.id?"bg-[#D0E2FF] bg-opacity-30":""}`,onClick:()=>F(e),children:[e.volumeInfo.imageLinks?.smallThumbnail?(0,s.jsx)("img",{src:e.volumeInfo.imageLinks.smallThumbnail||"/placeholder.svg",alt:e.volumeInfo.title,className:"h-20 w-14 object-cover rounded-sm"}):(0,s.jsx)("div",{className:"flex h-20 w-14 items-center justify-center rounded-sm bg-gray-200",children:(0,s.jsx)(c.A,{className:"h-6 w-6 text-gray-400"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-sm line-clamp-1",children:e.volumeInfo.title}),(0,s.jsx)("p",{className:"text-xs text-gray-500 line-clamp-1",children:e.volumeInfo.authors?.join(", ")||"Autor desconocido"}),(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[e.volumeInfo.publishedDate&&`${e.volumeInfo.publishedDate} \xb7 `,e.volumeInfo.publisher]}),e.volumeInfo.categories&&(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.volumeInfo.categories.slice(0,2).map((e,t)=>(0,s.jsx)("span",{className:"rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-600",children:e},t))})]})]},e.id))}):N&&x.trim()?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsxs)("p",{className:"mb-2",children:['No se encontraron resultados para "',x,'"']}),(0,s.jsx)("p",{className:"text-sm",children:"Intenta con otro t\xedtulo o autor"})]}):(0,s.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,s.jsx)(c.A,{className:"h-12 w-12 mx-auto mb-2 opacity-30"}),(0,s.jsx)("p",{className:"text-sm",children:"Busca por t\xedtulo, autor o ISBN"})]})]}),(0,s.jsxs)(m.Es,{className:"flex justify-between sm:justify-between",children:[(0,s.jsx)(m.HM,{asChild:!0,children:(0,s.jsx)(o.$,{variant:"ghost",className:"rounded-full text-[#888888]",children:"Cancelar"})}),(0,s.jsx)(o.$,{onClick:k,disabled:!w,className:"rounded-full bg-[#D0E2FF] text-[#222222] hover:bg-[#FFA69E]",children:"Aplicar metadatos"})]})]})]})}},86318:(e,t,r)=>{"use strict";r.d(t,{$:()=>a});var s=r(60647);let a=(0,s.createServerReference)("400838d2d27b6089eb8ce25f75705d0d08a6a0ba05",s.callServer,void 0,s.findSourceMapURL,"deleteBookAction")},87063:(e,t,r)=>{"use strict";function s(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return s}}),r(2332).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},87070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f,dynamic:()=>m});var s=r(54665),a=r(24699);let i=null;function o(){return process.env.NEXT_PUBLIC_SUPABASE_URL&&process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY?i||(i=(0,a.createClientComponentClient)({supabaseUrl:process.env.NEXT_PUBLIC_SUPABASE_URL,supabaseKey:process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,options:{auth:{persistSession:!0,storageKey:"giuli-reading-app-auth",autoRefreshToken:!0,detectSessionInUrl:!0}}})):null}let l=()=>o();function n(){return"aebaf7a8-0d83-403c-b5f4-9d798b74e3ee"}function d(){return console.log("getLocalBooks: Ejecutando en servidor, retornando array vac\xedo"),[]}async function c(e){try{let t=d().find(t=>t.id===e||t.local_id===e);if(t)return t;let r=l(),s=n(),{data:a,error:i}=await r.from("books").select("*").eq("id",e).eq("user_id",s).single();if(i)return console.error("Error fetching book:",i),null;return a}catch(e){return console.error("Error in getBookById:",e),null}}o(),process.env.NEXT_PUBLIC_SITE_URL;var u=r(96788),p=r(18468);let m="force-dynamic";async function f({params:e}){let t=await c(e.id);return t||(0,p.notFound)(),(0,s.jsx)("div",{className:"min-h-screen bg-[#FDFCFB] p-6",children:(0,s.jsx)("div",{className:"mx-auto max-w-md",children:(0,s.jsx)(u.EditBookForm,{book:t})})})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96788:(e,t,r)=>{"use strict";r.d(t,{EditBookForm:()=>s});let s=(0,r(47135).registerClientReference)(function(){throw Error("Attempted to call EditBookForm() from the server but EditBookForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/mlucchesi/cursor_personal/components/edit-book-form.tsx","EditBookForm")},98419:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(21294).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},99508:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var s=r(26611),a=r(35334),i=r(94105);let o=a.forwardRef(({className:e,type:t,...r},a)=>(0,s.jsx)("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r}));o.displayName="Input"}};var __webpack_require__=require("../../../webpack-runtime.js");__webpack_require__.C(exports);var __webpack_exec__=e=>__webpack_require__(__webpack_require__.s=e),__webpack_exports__=__webpack_require__.X(0,[607,397,746,31,699,489,530,468,255],()=>__webpack_exec__(36951));module.exports=__webpack_exports__})();