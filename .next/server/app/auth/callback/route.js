(()=>{var e={};e.id=15,e.ids=[15],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},17091:()=>{},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34631:e=>{"use strict";e.exports=require("tls")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57419:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},95248:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>d,serverHooks:()=>g,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{GET:()=>p,dynamic:()=>l});var o=t(67203),i=t(95420),n=t(17107),a=t(85106),c=t(24699),u=t(73155);let l="force-dynamic";async function p(e){try{let r=new URL(e.url),t=r.searchParams.get("code");if(console.log("Auth callback iniciado",{url:e.url,hasCode:!!t}),!t)return console.error("No se encontr\xf3 c\xf3digo en la URL"),a.NextResponse.redirect(new URL("/?error=no-code",r.origin));let s=(0,u.UL)(),o=(0,c.createRouteHandlerClient)({cookies:()=>s}),{error:i}=await o.auth.exchangeCodeForSession(t);if(i)return console.error("Error al intercambiar c\xf3digo por sesi\xf3n:",i),a.NextResponse.redirect(new URL("/?error=exchange",r.origin));let{data:n,error:l}=await o.auth.getSession();if(l)return console.error("Error al obtener sesi\xf3n despu\xe9s del intercambio:",l),a.NextResponse.redirect(new URL("/?error=session",r.origin));if(!n.session)return console.error("No se pudo establecer la sesi\xf3n despu\xe9s del intercambio"),a.NextResponse.redirect(new URL("/?error=no-session",r.origin));let p=a.NextResponse.redirect(new URL(`/dashboard?auth=${Date.now()}`,r.origin));return p.cookies.set("auth-status","authenticated",{httpOnly:!0,secure:!0,maxAge:604800,path:"/",sameSite:"lax"}),console.log("Auth callback completado con \xe9xito, redirigiendo a dashboard"),p}catch(t){console.error("Error general en el callback de autenticaci\xf3n:",t);let r=new URL(e.url);return a.NextResponse.redirect(new URL("/?error=general",r.origin))}}let d=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/auth/callback/route",pathname:"/auth/callback",filename:"route",bundlePath:"app/auth/callback/route"},resolvedPagePath:"/Users/mlucchesi/cursor_personal/app/auth/callback/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:x,workUnitAsyncStorage:h,serverHooks:g}=d;function m(){return(0,n.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[607,699,700,155],()=>t(95248));module.exports=s})();