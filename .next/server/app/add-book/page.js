(()=>{var exports={};exports.id=388,exports.ids=[388],exports.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5741:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(72659),o=t(95420),a=t(76446),i=t.n(a),l=t(70377),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);t.d(r,n);let d={children:["",{children:["add-book",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,47615)),"/Users/mlucchesi/cursor_personal/app/add-book/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,11046)),"/Users/mlucchesi/cursor_personal/app/layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,90462)),"/Users/mlucchesi/cursor_personal/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,13322,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,73003,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,78800,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/mlucchesi/cursor_personal/app/add-book/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/add-book/page",pathname:"/add-book",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32712:(e,r,t)=>{Promise.resolve().then(t.bind(t,96501))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},47615:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(54665),o=t(96501);function a(){return(0,s.jsx)(o.AddBookForm,{})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70319:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{AddBookForm:()=>AddBookForm});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(26611),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(35334),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),next_link__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1282),next_link__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_2__),next_navigation__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(54393),_components_ui_button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(46318),_components_ui_input__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(99508),_components_ui_textarea__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(53272),_components_ui_label__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(80342),_components_ui_radio_group__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(77203),_components_star_rating__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(48277),_barrel_optimize_names_ArrowLeft_lucide_react__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(64228),_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(37269),_app_actions__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(72872),_lib_simple_auth__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(10563),_components_connection_status__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(93560);let getCurrentDate=()=>new Date().toISOString().split("T")[0];function AddBookForm(){let[isSubmitting,setIsSubmitting]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),[bookType,setBookType]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("read"),[rating,setRating]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0),[error,setError]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),[success,setSuccess]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),router=(0,next_navigation__WEBPACK_IMPORTED_MODULE_3__.useRouter)(),[formData,setFormData]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({title:"",author:"",date_finished:getCurrentDate(),review:""}),handleChange=e=>{let{id:r,value:t}=e.target;setFormData(e=>({...e,[r]:t}))},handleSubmit=async e=>{e.preventDefault(),setIsSubmitting(!0),setError(null),setSuccess(null);try{if(!(0,_lib_simple_auth__WEBPACK_IMPORTED_MODULE_11__.wR)())throw Error("Debes iniciar sesi\xf3n para guardar un libro");if(!formData.title.trim())throw Error("El t\xedtulo del libro es obligatorio");if(!formData.author.trim())throw Error("El autor del libro es obligatorio");let bookData={title:formData.title.trim(),author:formData.author.trim(),type:bookType,..."read"===bookType&&{rating:rating>0?rating:null,date_finished:formData.date_finished||null,review:formData.review.trim()||null}};console.log("Enviando datos del libro:",bookData),(0,_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_10__.o)({title:"Guardando libro...",description:"Tu libro est\xe1 siendo guardado."});let result=await (0,_app_actions__WEBPACK_IMPORTED_MODULE_13__.Q)(bookData);if(console.log("Resultado de createBookAction:",result),result.success){if(result.clientSideCode)try{eval(result.clientSideCode)}catch(localStorageError){console.error("Error al guardar en localStorage desde el cliente:",localStorageError)}setSuccess(result.message),(0,_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_10__.o)({title:"\xa1Libro guardado!",description:result.message}),setFormData({title:"",author:"",date_finished:getCurrentDate(),review:""}),setRating(0),setTimeout(()=>{router.push("/dashboard"),router.refresh()},1500)}else throw Error(result.message||"Error al guardar el libro")}catch(error){console.error("Error saving book:",error);let errorMessage=error instanceof Error?error.message:"Hubo un problema al guardar tu libro. Por favor, int\xe9ntalo de nuevo.";setError(errorMessage),(0,_components_ui_use_toast__WEBPACK_IMPORTED_MODULE_10__.o)({title:"Error",description:errorMessage,variant:"destructive"})}finally{setIsSubmitting(!1)}};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"min-h-screen bg-[#FDFCFB] p-6",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("header",{className:"mb-8 flex items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_link__WEBPACK_IMPORTED_MODULE_2___default(),{href:"/dashboard",className:"mr-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_barrel_optimize_names_ArrowLeft_lucide_react__WEBPACK_IMPORTED_MODULE_14__.A,{className:"h-5 w-5 text-[#888888]"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{className:"font-serif text-2xl font-normal text-[#222222]",children:"A\xf1adir un libro"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_connection_status__WEBPACK_IMPORTED_MODULE_12__.v,{}),error&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mb-6 rounded-lg bg-red-500 p-4 text-white",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:error})}),success&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mb-6 rounded-lg bg-green-500 p-4 text-white",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:success})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{className:"space-y-8",onSubmit:handleSubmit,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-xl bg-white p-6 shadow-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_ui_radio_group__WEBPACK_IMPORTED_MODULE_8__.z,{defaultValue:"read",className:"mb-6 flex rounded-full bg-[#F5F5F5] p-1",onValueChange:setBookType,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"w-1/2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_radio_group__WEBPACK_IMPORTED_MODULE_8__.C,{value:"read",id:"read",className:"peer sr-only"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{htmlFor:"read",className:"flex cursor-pointer justify-center rounded-full py-2 text-center text-sm peer-data-[state=checked]:bg-[#D0E2FF] peer-data-[state=checked]:text-[#222222] text-[#888888] transition-all duration-200",children:"Le\xeddo"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"w-1/2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_radio_group__WEBPACK_IMPORTED_MODULE_8__.C,{value:"wishlist",id:"wishlist",className:"peer sr-only"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{htmlFor:"wishlist",className:"flex cursor-pointer justify-center rounded-full py-2 text-center text-sm peer-data-[state=checked]:bg-[#D0E2FF] peer-data-[state=checked]:text-[#222222] text-[#888888] transition-all duration-200",children:"Wishlist"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{htmlFor:"title",className:"text-sm text-[#888888]",children:"T\xedtulo del libro"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_5__.p,{id:"title",value:formData.title,onChange:handleChange,className:"rounded-lg border-[#D0E2FF] bg-white px-4 py-2 text-[#222222] placeholder:text-[#CCCCCC] focus:border-[#FFA69E] focus:ring-[#FFA69E]",placeholder:"Ingresa el t\xedtulo del libro",required:!0})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{htmlFor:"author",className:"text-sm text-[#888888]",children:"Autor"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_5__.p,{id:"author",value:formData.author,onChange:handleChange,className:"rounded-lg border-[#D0E2FF] bg-white px-4 py-2 text-[#222222] placeholder:text-[#CCCCCC] focus:border-[#FFA69E] focus:ring-[#FFA69E]",placeholder:"Ingresa el nombre del autor",required:!0})]}),"read"===bookType&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{htmlFor:"date_finished",className:"text-sm text-[#888888]",children:"Fecha de finalizaci\xf3n"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_input__WEBPACK_IMPORTED_MODULE_5__.p,{id:"date_finished",type:"date",value:formData.date_finished,onChange:handleChange,className:"rounded-lg border-[#D0E2FF] bg-white px-4 py-2 text-[#222222] focus:border-[#FFA69E] focus:ring-[#FFA69E]"})]}),"read"===bookType&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{className:"text-sm text-[#888888]",children:"Valoraci\xf3n"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_star_rating__WEBPACK_IMPORTED_MODULE_9__.G,{rating:rating,setRating:setRating})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_label__WEBPACK_IMPORTED_MODULE_7__.J,{htmlFor:"review",className:"text-sm text-[#888888]",children:"Tus pensamientos"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_6__.T,{id:"review",value:formData.review,onChange:handleChange,className:"min-h-[100px] rounded-lg border-[#D0E2FF] bg-white px-4 py-2 text-[#222222] placeholder:text-[#CCCCCC] focus:border-[#FFA69E] focus:ring-[#FFA69E]",placeholder:"Escribe tus pensamientos sobre este libro..."})]})]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.$,{type:"submit",className:"h-12 w-full rounded-full bg-[#D0E2FF] text-[#222222] hover:bg-[#FFA69E] transition-all duration-300",disabled:isSubmitting,children:isSubmitting?"Guardando...":"Guardar libro"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_link__WEBPACK_IMPORTED_MODULE_2___default(),{href:"/dashboard",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_ui_button__WEBPACK_IMPORTED_MODULE_4__.$,{type:"button",variant:"outline",className:"h-12 w-full rounded-full border-[#888888] text-[#888888] hover:bg-[#F5F5F5] transition-all duration-300",children:"Cancelar"})})]})]})]})})}},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96264:(e,r,t)=>{Promise.resolve().then(t.bind(t,70319))},96501:(e,r,t)=>{"use strict";t.d(r,{AddBookForm:()=>s});let s=(0,t(47135).registerClientReference)(function(){throw Error("Attempted to call AddBookForm() from the server but AddBookForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/mlucchesi/cursor_personal/components/add-book-form.tsx","AddBookForm")}};var __webpack_require__=require("../../webpack-runtime.js");__webpack_require__.C(exports);var __webpack_exec__=e=>__webpack_require__(__webpack_require__.s=e),__webpack_exports__=__webpack_require__.X(0,[607,397,746,31,530,468,255,101],()=>__webpack_exec__(5741));module.exports=__webpack_exports__})();