"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{184:(e,t,o)=>{o.d(t,{$:()=>l,r:()=>c});var r=o(4727),n=o(8319),a=o(8061),s=o(924),i=o(6119);let c=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:o,variant:n,size:s,asChild:l=!1,...u}=e,d=l?a.DX:"button";return(0,r.jsx)(d,{className:(0,i.cn)(c({variant:n,size:s,className:o})),ref:t,...u})});l.displayName="Button"},444:(e,t,o)=>{o.d(t,{HQ:()=>r,X9:()=>n}),o(9473).env.NEXT_PUBLIC_SITE_URL;let r="mis-lecturas-books",n="mis-lecturas-auth"},1375:(e,t,o)=>{o.d(t,{d:()=>g,o:()=>d});var r=o(8319);let n={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"},a=0,s=new Map,i=(e,t)=>{switch(t.type){case n.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case n.UPDATE_TOAST:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case n.DISMISS_TOAST:{let{toastId:o}=t;return o&&s.set(o,setTimeout(()=>{s.delete(o),u({type:n.REMOVE_TOAST,toastId:o})},1e6)),{...e,toasts:e.toasts.map(e=>e.id===o||void 0===o?{...e,open:!1}:e)}}case n.REMOVE_TOAST:if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function u(e){l=i(l,e),c.forEach(e=>{e(l)})}function d(e){let{...t}=e,o=(a=(a+1)%Number.MAX_VALUE).toString(),r=()=>u({type:n.DISMISS_TOAST,toastId:o});return u({type:n.ADD_TOAST,toast:{...t,id:o,open:!0,onOpenChange:e=>{e||r()}}}),{id:o,dismiss:r,update:e=>u({type:n.UPDATE_TOAST,toast:{...e,id:o}})}}function g(){let[e,t]=r.useState(l);return r.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>u({type:n.DISMISS_TOAST,toastId:e})}}},6119:(e,t,o)=>{o.d(t,{cn:()=>a});var r=o(4154),n=o(1173);function a(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,n.QP)((0,r.$)(t))}},6593:(e,t,o)=>{o.d(t,{F6:()=>i,iD:()=>a,ri:()=>s,wR:()=>n});let r=o(444).X9;function n(){try{return"authenticated"===localStorage.getItem(r)}catch(e){return console.error("Error al verificar autenticaci\xf3n:",e),!1}}function a(e){if("dayko"===e)try{return localStorage.setItem(r,"authenticated"),!0}catch(e){console.error("Error al guardar estado de autenticaci\xf3n:",e)}return!1}function s(){try{localStorage.removeItem(r),document.cookie="auth-status=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"}catch(e){console.error("Error al cerrar sesi\xf3n:",e)}}function i(){return"aebaf7a8-0d83-403c-b5f4-9d798b74e3ee"}},8808:(e,t,o)=>{o.d(t,{UU:()=>c});var r,n=o(569),a=o(9473);let s=null;function i(){return a.env.NEXT_PUBLIC_SUPABASE_URL&&a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY?s||(s=(0,n.createClientComponentClient)({supabaseUrl:a.env.NEXT_PUBLIC_SUPABASE_URL,supabaseKey:a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,options:{auth:{persistSession:!0,storageKey:"giuli-reading-app-auth",autoRefreshToken:!0,detectSessionInUrl:!0}}})):null}let c=()=>i();i()},9173:(e,t,o)=>{o.d(t,{HQ:()=>i,M7:()=>s});var r=o(8808),n=o(6593),a=o(444);function s(){try{let e=localStorage.getItem(a.HQ);if(!e)return console.log("getLocalBooks: No hay libros en localStorage"),[];let t=JSON.parse(e);return console.log("getLocalBooks: Obtenidos ".concat(t.length," libros de localStorage")),t}catch(e){return console.error("Error al obtener libros del almacenamiento local:",e),[]}}async function i(){try{let e=s();if(e.length>0)return console.log("Almacenamiento local ya inicializado con",e.length,"libros"),{success:!0,count:e.length};console.log("Inicializando almacenamiento local desde Supabase");let t=(0,r.UU)(),o=(0,n.F6)(),{data:i,error:c}=await t.from("books").select("*").eq("user_id",o);if(c)return console.error("Error al obtener libros de Supabase:",c),{success:!1,count:0,error:c};if(!i||0===i.length)return console.log("No hay libros en Supabase para inicializar"),{success:!0,count:0};let l=i.map(e=>({...e,local_id:e.local_id||"local-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),pending_sync:!1}));return localStorage.setItem(a.HQ,JSON.stringify(l)),console.log("Almacenamiento local inicializado con ".concat(l.length," libros")),"function"==typeof window.dispatchEvent&&window.dispatchEvent(new CustomEvent("booksUpdated",{detail:l})),{success:!0,count:l.length}}catch(e){return console.error("Error en initializeLocalStorage:",e),{success:!1,count:0,error:e}}}}}]);